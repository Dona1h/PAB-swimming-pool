<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PAB ì„±ì¸ ìˆ˜ì˜ ì „ì²´ ë“±ë¡ í˜„í™©</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #1e272e 0%, #2c3e50 100%);
      min-height: 100vh;
      padding: 28px 20px;
      color: #ecf0f1;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .header h1 {
      font-size: 28px;
      font-weight: 700;
      color: #ecf0f1;
      margin: 0;
      letter-spacing: -0.5px;
    }
    
    .header p {
      color: #95a5a6;
      font-size: 13px;
      margin: 6px 0 0;
    }
    
    .cards {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .card {
      background: rgba(44, 62, 80, 0.6);
      border-radius: 10px;
      padding: 14px 10px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
    }
    
    .card-label {
      font-size: 10px;
      color: #95a5a6;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .card-value {
      font-size: 20px;
      font-weight: 700;
      margin: 6px 0 0;
    }
    
    .card-sub {
      font-size: 10.5px;
      color: #7f8c8d;
      margin: 3px 0 0;
    }
    
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .panel {
      background: rgba(44, 62, 80, 0.6);
      border-radius: 12px;
      padding: 18px 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
    }
    
    .panel-title {
      font-size: 14px;
      font-weight: 700;
      color: #ecf0f1;
      margin: 0 0 14px;
      border-bottom: 2px solid rgba(236, 240, 241, 0.2);
      padding-bottom: 8px;
    }
    
    .pie-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .pie-chart {
      flex: 0 0 180px;
      height: 180px;
    }
    
    .pie-legend {
      flex: 1;
    }
    
    .legend-item {
      margin-bottom: 10px;
    }
    
    .legend-label {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: #bdc3c7;
      margin-bottom: 3px;
    }
    
    .legend-value {
      font-weight: 700;
    }
    
    .progress-bar {
      height: 6px;
      border-radius: 3px;
      background: rgba(127, 140, 141, 0.3);
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      border-radius: 3px;
      transition: width 0.3s ease;
    }
    
    .chart-container {
      height: 220px;
      margin-top: 10px;
      position: relative;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11.5px;
    }
    
    thead tr {
      background: rgba(52, 73, 94, 0.5);
    }
    
    th {
      padding: 8px 6px;
      border-bottom: 2px solid rgba(127, 140, 141, 0.3);
      color: #bdc3c7;
      font-weight: 600;
      text-align: center;
      font-size: 10.5px;
    }

    thead tr:first-child th {
      border-right: none !important;
    }

    thead tr:nth-child(2) th:nth-child(2),
    thead tr:nth-child(2) th:nth-child(6) {
      border-right: 2px solid rgba(149, 165, 166, 0.4);
    }

    tbody td:nth-child(3),
    tfoot td:nth-child(3),
    tbody td:nth-child(7),
    tfoot td:nth-child(7) {
      border-right: 2px solid rgba(149, 165, 166, 0.4);
    }
    
    tbody tr {
      border-bottom: 1px solid rgba(127, 140, 141, 0.2);
    }
    
    tbody tr:nth-child(even) {
      background: rgba(52, 73, 94, 0.2);
    }
    
    tbody tr:nth-child(odd) {
      background: rgba(44, 62, 80, 0.2);
    }
    
    td {
      padding: 7px 6px;
      text-align: center;
    }
    
    tfoot tr {
      background: rgba(52, 73, 94, 0.5);
    }
    
    tfoot td {
      padding: 9px 6px;
      font-weight: 700;
    }
    
    .insights {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    
    .insight-card {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      background: rgba(52, 73, 94, 0.3);
      border-radius: 8px;
      padding: 10px;
    }
    
    .insight-icon {
      font-size: 16px;
    }
    
    .insight-text {
      font-size: 11px;
      color: #bdc3c7;
      line-height: 1.5;
      margin: 0;
    }
    
    @media (max-width: 768px) {
      .cards {
        grid-template-columns: repeat(3, 1fr);
      }
      .grid-2 {
        grid-template-columns: 1fr;
      }
      .insights {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>ğŸŠ PAB ì„±ì¸ ìˆ˜ì˜ ì „ì²´ ë“±ë¡ í˜„í™©</h1>
      <p>ë§¤ì¼ë°˜/ë‹¨ê³¼ë°˜ Â· ì¥ê¸°/ë‹¨ê¸° ë¶„ì„ Â· ì¤‘ë³µ ì œê±° ì‹¤ì œ ì¸ì›</p>
    </div>

    <!-- 
    ============================================================================
    â­ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ 1: ìƒë‹¨ ì¹´ë“œ (6ê°œ)
    Python ìŠ¤í¬ë¦½íŠ¸ ì¶œë ¥ì˜ "HTML ì¹´ë“œ ì—…ë°ì´íŠ¸ìš© ìˆ«ì" ì„¹ì…˜ ì°¸ê³ 
    ============================================================================
    -->
    <div class="cards">
      <div class="card">
        <div class="card-label">ë‹¨ìˆœ í•©ê³„</div>
        <div class="card-value" style="color: #7f8c8d;">656ëª…</div>
        <div class="card-sub">ì¤‘ë³µ í¬í•¨</div>
      </div>
      <div class="card">
        <div class="card-label">ì‹¤ì œ ë“±ë¡</div>
        <div class="card-value" style="color: #ecf0f1;">542ëª…</div>
        <div class="card-sub">-114ëª…</div>
      </div>
      <div class="card">
        <div class="card-label">ë§¤ì¼ë°˜</div>
        <div class="card-value" style="color: #9b59b6;">114ëª…</div>
        <div class="card-sub">21.0%</div>
      </div>
      <div class="card">
        <div class="card-label">ë‹¨ê³¼ë°˜</div>
        <div class="card-value" style="color: #16a085;">428ëª…</div>
        <div class="card-sub">79.0%</div>
      </div>
      <div class="card">
        <div class="card-label">ì¥ê¸° (3ì›”+)</div>
        <div class="card-value" style="color: #27ae60;">446ëª…</div>
        <div class="card-sub">82.3%</div>
      </div>
      <div class="card">
        <div class="card-label">ë‹¨ê¸° (2ì›”)</div>
        <div class="card-value" style="color: #e74c3c;">96ëª…</div>
        <div class="card-sub">17.7%</div>
      </div>
    </div>

    <!-- Pie Charts -->
    <div class="grid-2">
      <div class="panel">
        <div class="panel-title">ğŸ“Š ë“±ë¡ ìœ í˜•ë³„ êµ¬ì„±</div>
        <div class="pie-section">
          <div class="pie-chart">
            <canvas id="pieType"></canvas>
          </div>
          <div class="pie-legend">
            <!-- 
            ========================================================================
            â­ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ 2: íŒŒì´ ì°¨íŠ¸ ë²”ë¡€
            Python ì¶œë ¥ì˜ ë¹„ìœ¨ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
            ========================================================================
            -->
            <div class="legend-item">
              <div class="legend-label">
                <span>ë§¤ì¼ë°˜ (ì¤‘ë³µ)</span>
                <span class="legend-value" style="color: #9b59b6;">114ëª… (21.0%)</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 21.0%; background: #9b59b6;"></div>
              </div>
            </div>
            <div class="legend-item">
              <div class="legend-label">
                <span>ì›”ìˆ˜ê¸ˆ ë‹¨ê³¼</span>
                <span class="legend-value" style="color: #3498db;">199ëª… (36.7%)</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 36.7%; background: #3498db;"></div>
              </div>
            </div>
            <div class="legend-item">
              <div class="legend-label">
                <span>í™”ëª©í†  ë‹¨ê³¼</span>
                <span class="legend-value" style="color: #e67e22;">229ëª… (42.3%)</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 42.3%; background: #e67e22;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-title">ğŸ“… ë“±ë¡ ê¸°ê°„ë³„ êµ¬ì„±</div>
        <div class="pie-section">
          <div class="pie-chart">
            <canvas id="pieTerm"></canvas>
          </div>
          <div class="pie-legend">
            <!-- 
            ========================================================================
            â­ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ 3: íŒŒì´ ì°¨íŠ¸ ë²”ë¡€
            Python ì¶œë ¥ì˜ ë¹„ìœ¨ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
            ========================================================================
            -->
            <div class="legend-item">
              <div class="legend-label">
                <span>ì¥ê¸° (3ì›” ì´í›„)</span>
                <span class="legend-value" style="color: #27ae60;">446ëª… (82.3%)</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 82.3%; background: #27ae60;"></div>
              </div>
            </div>
            <div class="legend-item">
              <div class="legend-label">
                <span>ë‹¨ê¸° (2ì›”)</span>
                <span class="legend-value" style="color: #e74c3c;">96ëª… (17.7%)</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 17.7%; background: #e74c3c;"></div>
              </div>
            </div>
            <div style="margin-top: 12px;">
              <p style="font-size: 10.5px; color: #7f8c8d; line-height: 1.5; margin: 0;">
                ğŸ’¡ ì‹¤ì œ ë“±ë¡ ì¸ì› ì¤‘ 82.3%ê°€ 3ì›” ì´í›„ ë§Œë£Œ â€” ëŒ€ì„¸ ì¥ê¸° ë“±ë¡
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bar Charts -->
    <div class="grid-2">
      <div class="panel">
        <div class="panel-title">ì‹œê°„ëŒ€ë³„ ë§¤ì¼ë°˜ / ë‹¨ê³¼ë°˜ êµ¬ì„±</div>
        <div class="chart-container">
          <canvas id="chartType"></canvas>
        </div>
      </div>

      <div class="panel">
        <div class="panel-title">ì‹œê°„ëŒ€ë³„ ì¥ê¸° / ë‹¨ê¸° êµ¬ì„± (ì‹¤ì œ ì¸ì›)</div>
        <div class="chart-container">
          <canvas id="chartTerm"></canvas>
        </div>
      </div>
    </div>

    <!-- Table -->
    <div class="panel">
      <div class="panel-title">ğŸ“‹ ì‹œê°„ëŒ€ë³„ ìƒì„¸ ë¶„ì„</div>
      <div style="overflow-x: auto;">
        <table>
          <thead>
            <tr>
              <th rowspan="2" style="vertical-align: middle;">ì‹œê°„</th>
              <th colspan="2" style="border-bottom: none;">ë“±ë¡ í˜„í™©</th>
              <th colspan="4" style="border-bottom: none;">ìœ í˜•ë³„ êµ¬ì„±</th>
              <th colspan="2" style="border-bottom: none;">ê¸°ê°„ë³„ êµ¬ì„±</th>
            </tr>
            <tr>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">ì›”ìˆ˜ê¸ˆ</th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">í™”ëª©í† </th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">ë§¤ì¼ë°˜</th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">ì›”ìˆ˜ê¸ˆ ë‹¨ê³¼</th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">í™”ëª©í†  ë‹¨ê³¼</th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">ì‹¤ì œ ì¸ì›</th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">ì¥ê¸°</th>
              <th style="border-bottom: 2px solid rgba(127, 140, 141, 0.3);">ë‹¨ê¸°</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
          <!-- 
          ============================================================================
          â­ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ 4: í…Œì´ë¸” í•©ê³„ í–‰
          Python ìŠ¤í¬ë¦½íŠ¸ ì¶œë ¥ì˜ "í…Œì´ë¸” í•©ê³„ í–‰" ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
          ============================================================================
          -->
          <tfoot>
            <tr>
              <td style="color: #ecf0f1;">í•©ê³„</td>
              <td style="color: #3498db;">313</td>
              <td style="color: #e67e22;">343</td>
              <td style="color: #9b59b6;">114</td>
              <td style="color: #95a5a6;">199</td>
              <td style="color: #95a5a6;">229</td>
              <td style="color: #ecf0f1;">542</td>
              <td style="color: #27ae60;">446</td>
              <td style="color: #e74c3c;">96</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <!-- Insights -->
    <div class="panel" style="margin-top: 16px;">
      <div class="panel-title">ğŸ’¡ í•µì‹¬ ì¸ì‚¬ì´íŠ¸</div>
      <div class="insights">
        <div class="insight-card">
          <span class="insight-icon">ğŸ“Š</span>
          <p class="insight-text">ë‹¨ìˆœ í•©ê³„ 656ëª… â†’ ì‹¤ì œ 542ëª… (ì¤‘ë³µ 114ëª… ì œê±°, -17.4%)</p>
        </div>
        <div class="insight-card">
          <span class="insight-icon">ğŸ‘¥</span>
          <p class="insight-text">ë§¤ì¼ë°˜ ë¹„ìœ¨ 21.0% â€” ì˜¤ì „(26%) vs ì €ë…(8% ë¯¸ë§Œ) ì°¨ì´ ëšœë ·</p>
        </div>
        <div class="insight-card">
          <span class="insight-icon">ğŸ“ˆ</span>
          <p class="insight-text">ì‹¤ì œ ë“±ë¡ ì¸ì›ì˜ 82.3%ê°€ ì¥ê¸° ë“±ë¡ â€” ëŒ€ì„¸ ì¥ê¸° ë“±ë¡ êµ¬ì¡°</p>
        </div>
        <div class="insight-card">
          <span class="insight-icon">ğŸŒ…</span>
          <p class="insight-text">ì˜¤ì „ ì‹œê°„ëŒ€: ì›”ìˆ˜ê¸ˆ ë‹¨ê³¼ë°˜ê³¼ ë§¤ì¼ë°˜ ë¹„ì¤‘ ë†’ìŒ (ì•ˆì •ì  ìš´ë™ íŒ¨í„´)</p>
        </div>
        <div class="insight-card">
          <span class="insight-icon">ğŸŒ†</span>
          <p class="insight-text">ì˜¤í›„/ì €ë… ì‹œê°„ëŒ€: í™”ëª©í†  ë‹¨ê³¼ë°˜ ë¹„ì¤‘ ë†’ìŒ (ìœ ì—°í•œ ìŠ¤ì¼€ì¤„ ì„ í˜¸)</p>
        </div>
        <div class="insight-card">
          <span class="insight-icon">âš ï¸</span>
          <p class="insight-text">2ì›” ë§Œë£Œ 96ëª… ê°±ì‹  í•„ìš” â€” 14:00(21ëª…), 20:00(14ëª…) ì§‘ì¤‘ ê´€ë¦¬</p>
        </div>
      </div>
    </div>
  </div>

  <div class="header" style="margin-top: 24px;">
    <p style="font-size: 11px; color: #95a5a6;">
      2026ë…„ 2ì›” 5ì¼ ê¸°ì¤€ ë°ì´í„° ë¶„ì„ ê²°ê³¼ | ë¶„ì„ì: ì´ë³´í˜• íŒ€ì¥
    </p>
  </div>

  <script>
    /* 
    ============================================================================
    â­ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ 5: timeData ë°°ì—´ (ê°€ì¥ ì¤‘ìš”!)
    Python ìŠ¤í¬ë¦½íŠ¸ ì¶œë ¥ì˜ "HTML ë³µì‚¬ìš© JavaScript ë°ì´í„°"ë¥¼ ì—¬ê¸°ì— ë³µì‚¬
    ============================================================================
    */
    const timeData = [
      { time:"6:00",  mwf:46, tts:50, daily:20, mwfOnly:26, ttsOnly:30, unique:76, uLong:64, uShort:12 },
      { time:"7:00",  mwf:43, tts:35, daily:17, mwfOnly:26, ttsOnly:18, unique:61, uLong:55, uShort:6 },
      { time:"8:00",  mwf:18, tts:22, daily:8,  mwfOnly:10, ttsOnly:14, unique:32, uLong:24, uShort:8 },
      { time:"9:00",  mwf:30, tts:23, daily:14, mwfOnly:16, ttsOnly:9,  unique:39, uLong:33, uShort:6 },
      { time:"10:00", mwf:29, tts:22, daily:11, mwfOnly:18, ttsOnly:11, unique:40, uLong:33, uShort:7 },
      { time:"10:50", mwf:16, tts:13, daily:8,  mwfOnly:8,  ttsOnly:5,  unique:21, uLong:17, uShort:4 },
      { time:"14:00", mwf:31, tts:36, daily:16, mwfOnly:15, ttsOnly:20, unique:51, uLong:30, uShort:21 },
      { time:"19:00", mwf:31, tts:47, daily:7,  mwfOnly:24, ttsOnly:40, unique:71, uLong:63, uShort:8 },
      { time:"20:00", mwf:41, tts:52, daily:6,  mwfOnly:35, ttsOnly:46, unique:87, uLong:73, uShort:14 },
      { time:"21:00", mwf:28, tts:43, daily:7,  mwfOnly:21, ttsOnly:36, unique:64, uLong:54, uShort:10 },
    ];

    const centerTextPlugin = {
      id: 'centerText',
      beforeDraw: (chart) => {
        if (chart.config.options.plugins.centerText) {
          const { ctx, chartArea: { width, height } } = chart;
          const centerX = width / 2;
          const centerY = height / 2;
          
          ctx.save();
          ctx.font = 'bold 20px Segoe UI';
          ctx.fillStyle = '#ecf0f1';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(chart.config.options.plugins.centerText.text, centerX, centerY);
          ctx.restore();
        }
      }
    };
    
    Chart.register(centerTextPlugin);

    const tbody = document.getElementById('tableBody');
    timeData.forEach(d => {
      tbody.innerHTML += `
        <tr>
          <td style="font-weight:700; color:#ecf0f1;">${d.time}</td>
          <td style="color:#3498db; font-weight:600;">${d.mwf}</td>
          <td style="color:#e67e22; font-weight:600;">${d.tts}</td>
          <td style="color:#9b59b6; font-weight:600;">${d.daily}</td>
          <td style="color:#95a5a6;">${d.mwfOnly}</td>
          <td style="color:#95a5a6;">${d.ttsOnly}</td>
          <td style="font-weight:700;">${d.unique}</td>
          <td style="color:#27ae60; font-weight:600;">${d.uLong}</td>
          <td style="color:#e74c3c; font-weight:600;">${d.uShort}</td>
        </tr>
      `;
    });

    const commonOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          labels: { color: '#95a5a6', font: { size: 10 } }
        },
        tooltip: {
          backgroundColor: '#34495e',
          titleColor: '#ecf0f1',
          bodyColor: '#ecf0f1',
          borderColor: '#7f8c8d',
          borderWidth: 1
        }
      },
      scales: {
        x: {
          ticks: { color: '#95a5a6', font: { size: 11 } },
          grid: { color: 'rgba(149, 165, 166, 0.1)' }
        },
        y: {
          ticks: { color: '#95a5a6', font: { size: 10 } },
          grid: { color: 'rgba(149, 165, 166, 0.1)' }
        }
      }
    };

    /* 
    ============================================================================
    â­ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ 6: íŒŒì´ ì°¨íŠ¸ ë°ì´í„°
    Python ì¶œë ¥ì˜ "íŒŒì´ ì°¨íŠ¸ ë°ì´í„°" ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
    ============================================================================
    */
    new Chart(document.getElementById('pieType'), {
      type: 'doughnut',
      data: {
        labels: ['ë§¤ì¼ë°˜', 'ì›”ìˆ˜ê¸ˆ ë‹¨ê³¼', 'í™”ëª©í†  ë‹¨ê³¼'],
        datasets: [{
          data: [114, 199, 229],  // â† ì—¬ê¸° ì—…ë°ì´íŠ¸
          backgroundColor: ['#9b59b6', '#3498db', '#e67e22']
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#34495e',
            titleColor: '#ecf0f1',
            bodyColor: '#ecf0f1'
          },
          centerText: {
            text: '542ëª…'  // â† ì—¬ê¸° ì—…ë°ì´íŠ¸
          },
          datalabels: {
            color: '#fff',
            font: { size: 14, weight: 'bold' },
            formatter: (value, ctx) => {
              const total = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
              const percentage = ((value / total) * 100).toFixed(1);
              return percentage + '%';
            },
            anchor: 'center',
            align: 'center'
          }
        }
      }
    });

    new Chart(document.getElementById('pieTerm'), {
      type: 'doughnut',
      data: {
        labels: ['ì¥ê¸°', 'ë‹¨ê¸°'],
        datasets: [{
          data: [446, 96],  // â† ì—¬ê¸° ì—…ë°ì´íŠ¸
          backgroundColor: ['#27ae60', '#e74c3c']
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#34495e',
            titleColor: '#ecf0f1',
            bodyColor: '#ecf0f1'
          },
          centerText: {
            text: '542ëª…'  // â† ì—¬ê¸° ì—…ë°ì´íŠ¸
          },
          datalabels: {
            color: '#fff',
            font: { size: 14, weight: 'bold' },
            formatter: (value, ctx) => {
              const total = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
              const percentage = ((value / total) * 100).toFixed(1);
              return percentage + '%';
            },
            anchor: 'center',
            align: 'center'
          }
        }
      }
    });

    new Chart(document.getElementById('chartType'), {
      type: 'bar',
      data: {
        labels: timeData.map(d => d.time),
        datasets: [
          { label: 'ë§¤ì¼ë°˜', data: timeData.map(d => d.daily), backgroundColor: '#9b59b6', stack: 'a' },
          { label: 'ì›”ìˆ˜ê¸ˆ ë‹¨ê³¼', data: timeData.map(d => d.mwfOnly), backgroundColor: '#3498db', stack: 'a' },
          { label: 'í™”ëª©í†  ë‹¨ê³¼', data: timeData.map(d => d.ttsOnly), backgroundColor: '#e67e22', stack: 'a' }
        ]
      },
      options: {
        ...commonOptions,
        plugins: {
          ...commonOptions.plugins,
          datalabels: {
            color: '#fff',
            font: { size: 10, weight: 'bold' },
            formatter: (value, ctx) => {
              const dataIndex = ctx.dataIndex;
              const d = timeData[dataIndex];
              const total = d.unique;
              const percentage = ((value / total) * 100).toFixed(0);
              return value > 0 && percentage >= 5 ? percentage + '%' : '';
            }
          }
        }
      }
    });

    new Chart(document.getElementById('chartTerm'), {
      type: 'bar',
      data: {
        labels: timeData.map(d => d.time),
        datasets: [
          { label: 'ì¥ê¸° (3ì›”+)', data: timeData.map(d => d.uLong), backgroundColor: '#27ae60', stack: 'a' },
          { label: 'ë‹¨ê¸° (2ì›”)', data: timeData.map(d => d.uShort), backgroundColor: '#e74c3c', stack: 'a' }
        ]
      },
      options: {
        ...commonOptions,
        plugins: {
          ...commonOptions.plugins,
          datalabels: {
            color: '#fff',
            font: { size: 10, weight: 'bold' },
            formatter: (value, ctx) => {
              const dataIndex = ctx.dataIndex;
              const d = timeData[dataIndex];
              const total = d.unique;
              const percentage = ((value / total) * 100).toFixed(0);
              return value > 0 && percentage >= 5 ? percentage + '%' : '';
            }
          }
        }
      }
    });
  </script>
</body>
</html>
